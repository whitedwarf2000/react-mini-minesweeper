(this["webpackJsonpreact-minesweeper"]=this["webpackJsonpreact-minesweeper"]||[]).push([[0],{31:function(e,t,n){e.exports=n(47)},41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),i=n.n(c),u=n(13),o=n(10),s=n(30),l=n(15),m={minesData:[],error:null,isLoading:!1},f=Object(o.c)({gameReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"game/fetchMines":return Object(l.a)({},e,{isLoading:!0});case"game/fetchMinesSuccess":return Object(l.a)({},e,{minesData:t.data,isLoading:!1});case"game/fetchMinesFail":return Object(l.a)({},e,{error:t.error,isLoading:!1});case"game/resetState":return Object(l.a)({},e,{minesData:[],error:null,isLoading:!1});default:return e}}}),b=n(12),p=n.n(b),h=n(16);function g(e){return{type:"game/fetchMinesSuccess",data:e}}function O(e){return 204===e.status||205===e.status?null:e.json()}function d(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function x(e,t){return fetch(e,t).then(d).then(O)}var v=p.a.mark(E),j=p.a.mark(w);function E(e){var t,n,a,r,c,i;return p.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload.params,n=t.size,a=t.mines,r="https://tiki-minesweeper.herokuapp.com/getMines?size=".concat(n,"&mines=").concat(a),u.prev=2,u.next=5,Object(h.a)(x,r);case 5:if(!(c=u.sent)||"success"!==c.msg){u.next=10;break}return i=c.data,u.next=10,Object(h.b)(g(i));case 10:u.next=16;break;case 12:return u.prev=12,u.t0=u.catch(2),u.next=16,Object(h.b)({type:"game/fetchMinesFail",error:u.t0});case 16:case"end":return u.stop()}}),v,null,[[2,12]])}function w(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.c)("game/fetchMines",E);case 2:case"end":return e.stop()}}),j)}var S=p.a.mark(y);function y(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:case"end":return e.stop()}}),S)}var k=y,M=Object(s.a)(),N=Object(o.e)(f,Object(o.a)(M));M.run(k);var B=n(48),L=(n(41),Object(u.b)((function(e){return{}}),(function(e){return{reset:function(){e({type:"game/resetState"})}}}))(Object(B.e)((function(e){var t=e.history,n=e.reset;return Object(a.useEffect)((function(){n()}),[]),r.a.createElement("div",{className:"welcome-wrapper"},r.a.createElement("div",{className:"welcome-wrapper_infor"},r.a.createElement("p",null,"Select your level"),r.a.createElement("button",{className:"button beginner-level",onClick:function(){t.push("/game/beginner")}},"Beginner"),r.a.createElement("button",{className:"button advantage-level",onClick:function(){t.push("/game/advantage")}},"Advantage")))})))),G=n(5),z=n(20),R=function(e){return e.gameReducer},C=Object(z.a)(R,(function(e){return e.minesData})),F=Object(z.a)(R,(function(e){return e.isLoading})),I=Object(z.a)(R,(function(e){return e.error})),D=(n(43),function(e){var t=e.cell,n=e.openAllCell,a=e.travelBoard,c=t.isMine,i=t.isOpen,u=t.numberOfBoom;return r.a.createElement("div",{className:"cell ".concat(i?"cell_visible":""),onClick:function(){return function(e){e.isMine?n&&n():e.isOpen||a(e.x,e.y)}(t)}},r.a.createElement("div",{className:"".concat(i?"show":"hidden")},i?c?r.a.createElement("span",null,"\ud83d\udca3"):r.a.createElement("span",null,0===u?null:u):null))}),A="WIN",P="LOST",T=(n(44),Object(a.memo)((function(e){var t=e.initBoard,n=e.size,c=e.winScore,i=e.startNewGame,u=e.history,o=e.handleGameStatus,s=e.handleResetState,l=Object(a.useState)([]),m=Object(G.a)(l,2),f=m[0],b=m[1],p=Object(a.useState)([]),h=Object(G.a)(p,2),g=h[0],O=h[1],d=Object(a.useState)(0),x=Object(G.a)(d,2),v=x[0],j=x[1],E=Object(a.useState)(!1),w=Object(G.a)(E,2),S=w[0],y=w[1],k=Object(a.useState)(!1),M=Object(G.a)(k,2),N=M[0],B=M[1],L=function(){var e=[];f&&f.length>0&&f.forEach((function(t){t.forEach((function(t){t.isOpen=!0;var n=r.a.createElement(D,{key:t.id,cell:t});e.push(n)}))})),O(e),B(!0),o(P)},z=function(e,t){return 0!==f[e][t].numberOfBoom&&!f[e][t].isMine};return Object(a.useEffect)((function(){var e=[];f&&f.length>0&&f.forEach((function(t){t.forEach((function(t){var a=r.a.createElement(D,{key:t.id,cell:t,openAllCell:L,travelBoard:function(e,t){!function e(t,a,r,c){if(!r&&!(t<0||a<0)&&!(t>=n||a>=n)&&!c){f[t][a].isOpen=!0,j((function(e){return e+1}));for(var i,u=[[t-1,a-1],[t-1,a],[t-1,a+1],[t,a+1],[t+1,a+1],[t+1,a],[t+1,a-1],[t,a-1]],o=0;o<8;o+=1)u[i=o][0]>-1&&u[i][0]<f.length&&u[i][1]>-1&&u[i][1]<f.length&&e(u[o][0],u[o][1],f[u[o][0]][u[o][1]].isOpen,z(t,a))}}(e,t,!1,!1)}});e.push(a)}))})),O(e)}),[f,v]),Object(a.useEffect)((function(){b(t)}),[t]),Object(a.useEffect)((function(){v===c&&(o(A),y(!0))}),[v]),r.a.createElement(r.a.Fragment,null,S||N?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button play-again",onClick:function(){s(),u.push("/welcome")}},"Back to home"),r.a.createElement("button",{className:"button play-again",onClick:function(){B(!1),j(0),i()}},"Reset game")):null,r.a.createElement("div",{className:"board ".concat(9===n?"beginner-board":"advantage-board")},g&&g.length>0&&g.map((function(e){return e}))))}))),J=Object(B.e)(T),Y=Object(a.memo)((function(e){var t=e.mines,n=e.isLoading,c=e.error,i=e.size,u=e.winScore,o=e.startNewGame,s=e.handleGameStatus,l=e.handleResetState,m=Object(a.useState)([]),f=Object(G.a)(m,2),b=f[0],p=f[1],h=function(){var e=function(){for(var e=[],n=0;n<i;n+=1){e.push([]);for(var a=0;a<i;a+=1)e[n][a]={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),x:n,y:a,isMine:!1,numberOfBoom:0,isOpen:!1}}return t&&t.length>0&&t.forEach((function(t){var n=e[t.x][t.y];n&&(n.isMine=!0)})),e}();return t&&t.length>0&&t.forEach((function(t){for(var n,a=[[t.x-1,t.y-1],[t.x-1,t.y],[t.x-1,t.y+1],[t.x,t.y+1],[t.x+1,t.y+1],[t.x+1,t.y],[t.x+1,t.y-1],[t.x,t.y-1]],r=0;r<8;r+=1)a[n=r][0]>-1&&a[n][0]<e.length&&a[n][1]>-1&&a[n][1]<e.length&&(e[a[r][0]][a[r][1]].isMine||(e[a[r][0]][a[r][1]].numberOfBoom+=1))})),e}();return Object(a.useEffect)((function(){p(h)}),[t]),r.a.createElement(r.a.Fragment,null,c?r.a.createElement(r.a.Fragment,null,"Somethings when wrong???"):n?r.a.createElement("p",null,"Ch\u1edd t\xed nha..."):r.a.createElement(J,{initBoard:b,size:i,winScore:u,startNewGame:o,handleGameStatus:s,handleResetState:l}))})),_=Object(a.memo)((function(e){var t=e.isGameStart,n=e.isRefresh,c=Object(a.useState)(0),i=Object(G.a)(c,2),u=i[0],o=i[1];return Object(a.useEffect)((function(){var e=null;return t?e=setInterval((function(){o((function(e){return e+1}))}),1e3):t||0===u||clearInterval(e),function(){return clearInterval(e)}}),[t]),Object(a.useEffect)((function(){n&&o(0)}),[t,n]),r.a.createElement("h2",null,"Time: ",new Date(1e3*u).toISOString().substr(11,8))})),W=Object(a.memo)((function(e){var t=e.getMines,n=e.mines,c=e.isLoading,i=e.error,u=e.defaultParams,o=e.reset,s=u.size,l=s*s-u.mines,m=Object(a.useState)(!1),f=Object(G.a)(m,2),b=f[0],p=f[1],h=Object(a.useState)(!1),g=Object(G.a)(h,2),O=g[0],d=g[1];return Object(a.useEffect)((function(){t(u)}),[]),Object(a.useEffect)((function(){n&&n.length>0&&p(!0)}),[n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{isGameStart:b,isRefresh:O}),r.a.createElement(Y,{mines:n,isLoading:c,error:i,size:s,winScore:l,startNewGame:function(){t(u),d(!0)},handleGameStatus:function(e){e===A?alert("You win"):alert("You lost"),p(!1),d(!1)},handleResetState:function(){o()}}))})),q=Object(u.b)((function(e){return{error:I(e),isLoading:F(e),mines:C(e)}}),(function(e){return{getMines:function(t){e(function(e){return{type:"game/fetchMines",payload:{params:e}}}(t))},reset:function(){e({type:"game/resetState"})}}}))(W),H=[{path:"/welcome",component:L},{path:"/game/beginner",component:function(){return r.a.createElement(q,{defaultParams:{size:9,mines:10}})}},{path:"/game/advantage",component:function(){return r.a.createElement(q,{defaultParams:{size:16,mines:40}})}}],K=n(9),Q=Object(K.a)();n(45);var U=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Minesweeper"),r.a.createElement(B.c,{history:Q},r.a.createElement(B.d,null,r.a.createElement(B.a,{exact:!0,from:"/",to:"/welcome"}),H.map((function(e,t){return r.a.createElement(B.b,{key:t,path:e.path,component:e.component})})))))};n(46);i.a.render(r.a.createElement(u.a,{store:N},r.a.createElement(U,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.ff116ca5.chunk.js.map